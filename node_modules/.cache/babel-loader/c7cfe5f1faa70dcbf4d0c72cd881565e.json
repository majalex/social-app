{"ast":null,"code":"import _defineProperty from\"/Users/alex/Desktop/akademia108/react/social-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/alex/Desktop/akademia108/react/social-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/alex/Desktop/akademia108/react/social-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./Login.css';import{useState}from'react';import axios from'axios';import{Navigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(props){var _useState=useState({username:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),loginMessage=_useState4[0],setLoginMessage=_useState4[1];var handleInputChange=function handleInputChange(e){var target=e.target;var name=target.name;setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},name,target.value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();axios.post(\"https://akademia108.pl/api/social-app/user/login\",{username:formData.username,password:formData.password}).then(function(res){if(Array.isArray(res.data.username)){setLoginMessage(res.data.username[0]);}else if(Array.isArray(res.data.password)){setLoginMessage(res.data.username[0]);}else if(res.data.error){setLoginMessage('Incorrect username or password');}else{setLoginMessage(\"\");props.setUser(res.data);localStorage.setItem(\"user\",JSON.stringify(res.data));}props.setUser(res.data);localStorage.setItem('user',JSON.stringify(res.data));}).catch(function(error){console.log(error);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"login\",children:[props.user&&/*#__PURE__*/_jsx(Navigate,{to:\"/\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[loginMessage&&/*#__PURE__*/_jsx(\"h2\",{children:loginMessage}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",placeholder:\"User name\",value:formData.username,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"password\",value:formData.password,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",children:\"Login\"})]})]});};export default Login;","map":{"version":3,"names":["useState","axios","Navigate","Login","props","username","password","formData","setFormData","loginMessage","setLoginMessage","handleInputChange","e","target","name","value","handleSubmit","preventDefault","post","then","res","Array","isArray","data","error","setUser","localStorage","setItem","JSON","stringify","catch","console","log","user"],"sources":["/Users/alex/Desktop/akademia108/react/social-app/src/views/Login.js"],"sourcesContent":["import './Login.css';\nimport { useState } from 'react';\nimport axios from 'axios';\nimport { Navigate } from 'react-router-dom';\n\nconst Login = (props) => {\n\n    const [formData, setFormData] = useState({\n        username: \"\",\n        password: \"\",\n    });\n\n    const [loginMessage, setLoginMessage] = useState(\"\");\n\n    const handleInputChange = (e) => {\n        const target = e.target;\n        const name = target.name;\n\n        setFormData({\n            ...formData,\n            [name]: target.value,\n        });\n    };\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n\n        axios\n            .post(\"https://akademia108.pl/api/social-app/user/login\", {\n                username: formData.username,\n                password: formData.password\n            })\n            .then((res) => {\n                if (Array.isArray(res.data.username)) {\n                    setLoginMessage(res.data.username[0])\n                } else if (Array.isArray(res.data.password)) {\n                    setLoginMessage(res.data.username[0])\n                } else if (res.data.error) {\n                    setLoginMessage('Incorrect username or password')\n                } else {\n                    setLoginMessage(\"\");\n                    props.setUser(res.data);\n                    localStorage.setItem(\"user\", JSON.stringify(res.data));\n                }\n\n                props.setUser(res.data)\n                localStorage.setItem('user', JSON.stringify(res.data))\n            })\n            .catch((error) => {\n                console.log(error);\n            });\n    };\n\n    return (\n        <div className=\"login\">\n            {props.user && <Navigate to=\"/\" />}\n            <form onSubmit={handleSubmit}>\n                {loginMessage && <h2>{loginMessage}</h2>}\n                <input type=\"text\" name=\"username\" placeholder=\"User name\" value={formData.username} onChange={handleInputChange} />\n\n                <input type=\"password\" name=\"password\" placeholder=\"password\" value={formData.password} onChange={handleInputChange} />\n\n                <button className=\"btn\">Login</button>\n            </form>\n        </div>\n    );\n}\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module"}