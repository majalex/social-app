{"ast":null,"code":"var _jsxFileName = \"/Users/alex/Desktop/akademia108/react/social-app/src/views/Login.js\",\n    _s = $RefreshSig$();\n\nimport './Login.css';\nimport { useState } from 'react';\nimport axios from 'axios';\nimport { Navigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = props => {\n  _s();\n\n  const [formData, setFormData] = useState({\n    username: \"\",\n    password: \"\"\n  });\n  const [loginMessage, setLoginMessage] = useState(\"\");\n\n  const handleInputChange = e => {\n    const target = e.target;\n    const name = target.name;\n    setFormData({ ...formData,\n      [name]: target.value\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    axios.post(\"https://akademia108.pl/api/social-app/user/login\", {\n      username: formData.username,\n      password: formData.password\n    }).then(res => {\n      if (Array.isArray(res.data.username)) {\n        setLoginMessage(res.data.username[0]);\n      } else if (Array.isArray(res.data.password)) {\n        setLoginMessage(res.data.username[0]);\n      } else if (res.data.error) {\n        setLoginMessage('Incorrect username or password');\n      } else {\n        setLoginMessage(\"\");\n        props.setUser(res.data);\n        localStorage.setItem(\"user\", JSON.stringify(res.data));\n      }\n\n      props.setUser(res.data);\n      localStorage.setItem('user', JSON.stringify(res.data));\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login\",\n    children: [props.user && /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 28\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [loginMessage && /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: loginMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 34\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"username\",\n        placeholder: \"User name\",\n        value: formData.username,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"password\",\n        value: formData.password,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Login, \"Lv9818ni4prsUvcDZtRQcNTO4TE=\");\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useState","axios","Navigate","Login","props","formData","setFormData","username","password","loginMessage","setLoginMessage","handleInputChange","e","target","name","value","handleSubmit","preventDefault","post","then","res","Array","isArray","data","error","setUser","localStorage","setItem","JSON","stringify","catch","console","log","user"],"sources":["/Users/alex/Desktop/akademia108/react/social-app/src/views/Login.js"],"sourcesContent":["import './Login.css';\nimport { useState } from 'react';\nimport axios from 'axios';\nimport { Navigate } from 'react-router-dom';\n\nconst Login = (props) => {\n\n    const [formData, setFormData] = useState({\n        username: \"\",\n        password: \"\",\n    });\n\n    const [loginMessage, setLoginMessage] = useState(\"\");\n\n    const handleInputChange = (e) => {\n        const target = e.target;\n        const name = target.name;\n\n        setFormData({\n            ...formData,\n            [name]: target.value,\n        });\n    };\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n\n        axios\n            .post(\"https://akademia108.pl/api/social-app/user/login\", {\n                username: formData.username,\n                password: formData.password\n            })\n            .then((res) => {\n                if (Array.isArray(res.data.username)) {\n                    setLoginMessage(res.data.username[0])\n                } else if (Array.isArray(res.data.password)) {\n                    setLoginMessage(res.data.username[0])\n                } else if (res.data.error) {\n                    setLoginMessage('Incorrect username or password')\n                } else {\n                    setLoginMessage(\"\");\n                    props.setUser(res.data);\n                    localStorage.setItem(\"user\", JSON.stringify(res.data));\n                }\n\n                props.setUser(res.data)\n                localStorage.setItem('user', JSON.stringify(res.data))\n            })\n            .catch((error) => {\n                console.log(error);\n            });\n    };\n\n    return (\n        <div className=\"login\">\n            {props.user && <Navigate to=\"/\" />}\n            <form onSubmit={handleSubmit}>\n                {loginMessage && <h2>{loginMessage}</h2>}\n                <input type=\"text\" name=\"username\" placeholder=\"User name\" value={formData.username} onChange={handleInputChange} />\n\n                <input type=\"password\" name=\"password\" placeholder=\"password\" value={formData.password} onChange={handleInputChange} />\n\n                <button className=\"btn\">Login</button>\n            </form>\n        </div>\n    );\n}\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module"}