{"ast":null,"code":"import _slicedToArray from\"/Users/alex/Desktop/akademia108/react/social-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./Home.css';import axios from\"axios\";import{useEffect,useState}from\"react\";import Post from\"../components/Post\";import AddPost from'../components/AddPost';import FollowRecomendations from'../components/FollowRecomendations';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=function Home(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var getLatestPosts=function getLatestPosts(){axios.post(\"https://akademia108.pl/api/social-app/post/latest\").then(function(res){setPosts(res.data);}).catch(function(error){console.log(error);});};var getPrevPosts=function getPrevPosts(){axios.post(\"https://akademia108.pl/api/social-app/post/newer-then\",{date:posts[0].created_at}).then(function(res){setPosts(res.data.concat(posts));}).catch(function(error){console.log(error);});};var getNextPosts=function getNextPosts(){axios.post(\"https://akademia108.pl/api/social-app/post/older-then\",{date:posts[posts.length-1].created_at}).then(function(res){setPosts(posts.concat(res.data));}).catch(function(error){console.log(error);});};useEffect(function(){getLatestPosts();},[props.user]);return/*#__PURE__*/_jsxs(\"div\",{className:\"home\",children:[props.user&&/*#__PURE__*/_jsx(AddPost,{getPrevPosts:getPrevPosts}),props.user&&/*#__PURE__*/_jsx(FollowRecomendations,{user:props.user,getLatestPosts:getLatestPosts,posts:posts}),/*#__PURE__*/_jsxs(\"div\",{className:\"postList\",children:[posts.map(function(post){return/*#__PURE__*/_jsx(Post,{post:post,user:props.user,setPosts:setPosts,getLatestPosts:getLatestPosts},post.id);}),/*#__PURE__*/_jsx(\"button\",{className:\"btn loadMore\",onClick:getNextPosts,children:\"Load more\"})]})]});};export default Home;","map":{"version":3,"names":["axios","useEffect","useState","Post","AddPost","FollowRecomendations","Home","props","posts","setPosts","getLatestPosts","post","then","res","data","catch","error","console","log","getPrevPosts","date","created_at","concat","getNextPosts","length","user","map","id"],"sources":["/Users/alex/Desktop/akademia108/react/social-app/src/views/Home.js"],"sourcesContent":["import './Home.css';\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport Post from \"../components/Post\";\nimport AddPost from '../components/AddPost';\nimport FollowRecomendations from '../components/FollowRecomendations';\n\nconst Home = (props) => {\n    const [posts, setPosts] = useState([])\n\n    const getLatestPosts = () => {\n        axios\n            .post(\"https://akademia108.pl/api/social-app/post/latest\")\n            .then((res) => {\n                setPosts(res.data)\n            })\n            .catch((error) => {\n                console.log(error);\n            });\n    };\n\n    const getPrevPosts = () => {\n        axios\n            .post(\"https://akademia108.pl/api/social-app/post/newer-then\", { date: posts[0].created_at})\n            .then((res) => {\n                setPosts(res.data.concat(posts))\n            })\n            .catch((error) => {\n                console.log(error);\n            });\n    };\n\n    const getNextPosts = () => {\n        axios\n            .post(\"https://akademia108.pl/api/social-app/post/older-then\", { date: posts[posts.length - 1].created_at })\n            .then((res) => {\n                setPosts(posts.concat(res.data))\n            })\n            .catch((error) => {\n                console.log(error);\n            });\n    };\n\n    useEffect(() => {\n        getLatestPosts();\n    }, [props.user])\n\n    return (\n        <div className=\"home\">\n            {props.user && <AddPost getPrevPosts={getPrevPosts} />}\n            {props.user && <FollowRecomendations user={props.user} getLatestPosts={getLatestPosts} posts={posts}/>}\n            <div className=\"postList\">\n                {posts.map((post) => {\n                    return <Post post={post} key={post.id} user={props.user} setPosts={setPosts} getLatestPosts={getLatestPosts}/>\n                })}\n                <button className='btn loadMore' onClick={getNextPosts}>Load more</button>\n            </div>\n        </div>\n    );\n};\n\nexport default Home;"],"mappings":"sIAAA,MAAO,YAAP,CACA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,MAAOC,KAAP,KAAiB,oBAAjB,CACA,MAAOC,QAAP,KAAoB,uBAApB,CACA,MAAOC,qBAAP,KAAiC,oCAAjC,C,wFAEA,GAAMC,KAAI,CAAG,QAAPA,KAAO,CAACC,KAAD,CAAW,CACpB,cAA0BL,QAAQ,CAAC,EAAD,CAAlC,wCAAOM,KAAP,eAAcC,QAAd,eAEA,GAAMC,eAAc,CAAG,QAAjBA,eAAiB,EAAM,CACzBV,KAAK,CACAW,IADL,CACU,mDADV,EAEKC,IAFL,CAEU,SAACC,GAAD,CAAS,CACXJ,QAAQ,CAACI,GAAG,CAACC,IAAL,CAAR,CACH,CAJL,EAKKC,KALL,CAKW,SAACC,KAAD,CAAW,CACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACH,CAPL,EAQH,CATD,CAWA,GAAMG,aAAY,CAAG,QAAfA,aAAe,EAAM,CACvBnB,KAAK,CACAW,IADL,CACU,uDADV,CACmE,CAAES,IAAI,CAAEZ,KAAK,CAAC,CAAD,CAAL,CAASa,UAAjB,CADnE,EAEKT,IAFL,CAEU,SAACC,GAAD,CAAS,CACXJ,QAAQ,CAACI,GAAG,CAACC,IAAJ,CAASQ,MAAT,CAAgBd,KAAhB,CAAD,CAAR,CACH,CAJL,EAKKO,KALL,CAKW,SAACC,KAAD,CAAW,CACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACH,CAPL,EAQH,CATD,CAWA,GAAMO,aAAY,CAAG,QAAfA,aAAe,EAAM,CACvBvB,KAAK,CACAW,IADL,CACU,uDADV,CACmE,CAAES,IAAI,CAAEZ,KAAK,CAACA,KAAK,CAACgB,MAAN,CAAe,CAAhB,CAAL,CAAwBH,UAAhC,CADnE,EAEKT,IAFL,CAEU,SAACC,GAAD,CAAS,CACXJ,QAAQ,CAACD,KAAK,CAACc,MAAN,CAAaT,GAAG,CAACC,IAAjB,CAAD,CAAR,CACH,CAJL,EAKKC,KALL,CAKW,SAACC,KAAD,CAAW,CACdC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACH,CAPL,EAQH,CATD,CAWAf,SAAS,CAAC,UAAM,CACZS,cAAc,GACjB,CAFQ,CAEN,CAACH,KAAK,CAACkB,IAAP,CAFM,CAAT,CAIA,mBACI,aAAK,SAAS,CAAC,MAAf,WACKlB,KAAK,CAACkB,IAAN,eAAc,KAAC,OAAD,EAAS,YAAY,CAAEN,YAAvB,EADnB,CAEKZ,KAAK,CAACkB,IAAN,eAAc,KAAC,oBAAD,EAAsB,IAAI,CAAElB,KAAK,CAACkB,IAAlC,CAAwC,cAAc,CAAEf,cAAxD,CAAwE,KAAK,CAAEF,KAA/E,EAFnB,cAGI,aAAK,SAAS,CAAC,UAAf,WACKA,KAAK,CAACkB,GAAN,CAAU,SAACf,IAAD,CAAU,CACjB,mBAAO,KAAC,IAAD,EAAM,IAAI,CAAEA,IAAZ,CAAgC,IAAI,CAAEJ,KAAK,CAACkB,IAA5C,CAAkD,QAAQ,CAAEhB,QAA5D,CAAsE,cAAc,CAAEC,cAAtF,EAAuBC,IAAI,CAACgB,EAA5B,CAAP,CACH,CAFA,CADL,cAII,eAAQ,SAAS,CAAC,cAAlB,CAAiC,OAAO,CAAEJ,YAA1C,uBAJJ,GAHJ,GADJ,CAYH,CApDD,CAsDA,cAAejB,KAAf"},"metadata":{},"sourceType":"module"}