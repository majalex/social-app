{"ast":null,"code":"import _defineProperty from\"/Users/alex/Desktop/akademia108/react/social-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/alex/Desktop/akademia108/react/social-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/alex/Desktop/akademia108/react/social-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import{Link,Navigate}from'react-router-dom';import'./SignUp.css';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SignUp=function SignUp(props){var _useState=useState({username:\"\",email:\"\",password:\"\",confirmPassword:\"\"}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState({username:\"\",email:\"\",password:\"\",confirmPassword:\"\"}),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),signUpMessage=_useState6[0],setSignUpMessage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),signUpDone=_useState8[0],setSignUpDone=_useState8[1];var validate=function validate(){var validationErrors={username:false,email:false,password:false,confirmPassword:false};// user name\nif(formData.username.trim().length<4){validationErrors.username=true;setErrors(function(prevErrors){return _objectSpread(_objectSpread({},prevErrors),{},{username:\"Username should have at least 4 characters\"});});}else if(!/^[^\\s]*$/.test(formData.username.trim())){validationErrors.username=true;setErrors(function(prevErrors){return _objectSpread(_objectSpread({},prevErrors),{},{username:\"Username should'n have empty characters\"});});}else{validationErrors.username=false;setErrors(function(prevErrors){return _objectSpread(_objectSpread({},prevErrors),{},{username:\"\"});});}// E-mail\nif(!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(formData.email.trim())){validationErrors.email=true;setErrors(function(prevErrors){return _objectSpread(_objectSpread({},prevErrors),{},{email:\"There is no valid email adress\"});});}else{validationErrors.email=false;setErrors(function(prevErrors){return _objectSpread(_objectSpread({},prevErrors),{},{email:\"\"});});}// Password\nif(formData.password.trim().length<6){validationErrors.password=true;setErrors(function(prevErrors){return _objectSpread(_objectSpread({},prevErrors),{},{password:\"Password should have at least 6 characters\"});});}else if(!/^[^\\s]*$/.test(formData.password.trim())){validationErrors.password=true;setErrors(function(prevErrors){return _objectSpread(_objectSpread({},prevErrors),{},{password:\"Password should'n have empty characters\"});});}else if(!/[!@#$%^&*()_+\\-=[\\]{};';\"\\\\|,.<>/?]+/.test(formData.password.trim())){validationErrors.password=true;setErrors(function(prevErrors){return _objectSpread(_objectSpread({},prevErrors),{},{password:\"Password must contain one of charts ! # @ $ %\"});});}else{validationErrors.password=false;setErrors(function(prevErrors){return _objectSpread(_objectSpread({},prevErrors),{},{password:\"\"});});}// Confirm password\nif(formData.password.trim()!==formData.confirmPassword.trim()){validationErrors.confirmPassword=true;setErrors(function(prevErrors){return _objectSpread(_objectSpread({},prevErrors),{},{confirmPassword:\"Passwords should be the same\"});});}else{validationErrors.password=false;setErrors(function(prevErrors){return _objectSpread(_objectSpread({},prevErrors),{},{confirmPassword:\"\"});});}return!validationErrors.username&&!validationErrors.email&&!validationErrors.password&&!validationErrors.confirmPassword;};var handleInputChange=function handleInputChange(e){var target=e.target;var name=target.name;setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},name,target.value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();if(!validate()){return;}axios.post(\"https://akademia108.pl/api/social-app/user/signup\",{username:formData.username,email:formData.email,password:formData.password}).then(function(res){console.log(res.data);var resData=res.data;if(resData.signedup){setSignUpMessage(\"Account created\");setSignUpDone(true);}else{if(res.data.message.username){setSignUpMessage(resData.message.username[0]);}else if(resData.message.email){setSignUpMessage(resData.message.email[0]);}};}).catch(function(error){console.log(error);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"signUp\",children:[props.user&&/*#__PURE__*/_jsx(Navigate,{to:\"/\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[signUpMessage&&/*#__PURE__*/_jsx(\"h2\",{children:signUpMessage}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",placeholder:\"User name\",onChange:handleInputChange}),errors.username&&/*#__PURE__*/_jsx(\"p\",{children:errors.username}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"E-mail\",onChange:handleInputChange}),errors.email&&/*#__PURE__*/_jsx(\"p\",{children:errors.email}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Password\",onChange:handleInputChange}),errors.password&&/*#__PURE__*/_jsx(\"p\",{children:errors.password}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"confirmPassword\",placeholder:\" Confirm password\",onChange:handleInputChange}),errors.confirmPassword&&/*#__PURE__*/_jsx(\"p\",{children:errors.confirmPassword}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",disabled:signUpDone,children:\"Sign Up\"}),signUpDone&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"btn\",children:\"Go to login\"})})]})]});};export default SignUp;","map":{"version":3,"names":["useState","Link","Navigate","axios","SignUp","props","username","email","password","confirmPassword","formData","setFormData","errors","setErrors","signUpMessage","setSignUpMessage","signUpDone","setSignUpDone","validate","validationErrors","trim","length","prevErrors","test","handleInputChange","e","target","name","value","handleSubmit","preventDefault","post","then","res","console","log","data","resData","signedup","message","catch","error","user"],"sources":["/Users/alex/Desktop/akademia108/react/social-app/src/views/SignUp.js"],"sourcesContent":["import { useState } from 'react';\nimport { Link, Navigate } from 'react-router-dom';\nimport './SignUp.css';\nimport axios from 'axios';\n\n\nconst SignUp = (props) => {\n\n    const [formData, setFormData] = useState({\n        username: \"\",\n        email: \"\",\n        password: \"\",\n        confirmPassword: \"\",\n    });\n\n    const [errors, setErrors] = useState({\n        username: \"\",\n        email: \"\",\n        password: \"\",\n        confirmPassword: \"\",\n    });\n\n    const [signUpMessage, setSignUpMessage] = useState('');\n\n    const [signUpDone, setSignUpDone] = useState(false);\n\n\n\n    const validate = () => {\n        let validationErrors = {\n            username: false,\n            email: false,\n            password: false,\n            confirmPassword: false,\n        };\n\n        // user name\n\n        if (formData.username.trim().length < 4) {\n            validationErrors.username = true;\n            setErrors(prevErrors => {\n                return { ...prevErrors, username: \"Username should have at least 4 characters\" };\n            });\n        } else if (!/^[^\\s]*$/.test(formData.username.trim())) {\n            validationErrors.username = true;\n            setErrors((prevErrors) => {\n                return {\n                    ...prevErrors,\n                    username: \"Username should'n have empty characters\",\n                };\n            });\n        } else {\n            validationErrors.username = false;\n            setErrors((prevErrors) => {\n                return {\n                    ...prevErrors,\n                    username: \"\",\n                };\n            });\n        }\n\n        // E-mail\n\n        if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(formData.email.trim())) {\n            validationErrors.email = true;\n            setErrors((prevErrors) => {\n                return {\n                    ...prevErrors,\n                    email: \"There is no valid email adress\",\n                };\n            });\n        } else {\n            validationErrors.email = false;\n            setErrors((prevErrors) => {\n                return {\n                    ...prevErrors,\n                    email: \"\",\n                };\n            });\n        }\n\n        // Password\n\n        if (formData.password.trim().length < 6) {\n            validationErrors.password = true;\n            setErrors((prevErrors) => {\n                return {\n                    ...prevErrors,\n                    password: \"Password should have at least 6 characters\",\n                };\n            });\n        } else if (!/^[^\\s]*$/.test(formData.password.trim())) {\n            validationErrors.password = true;\n            setErrors((prevErrors) => {\n                return {\n                    ...prevErrors,\n                    password: \"Password should'n have empty characters\",\n                };\n            });\n        } else if (!/[!@#$%^&*()_+\\-=[\\]{};';\"\\\\|,.<>/?]+/.test(formData.password.trim())) {\n            validationErrors.password = true;\n            setErrors((prevErrors) => {\n                return {\n                    ...prevErrors,\n                    password: \"Password must contain one of charts ! # @ $ %\",\n                };\n            });\n        } else {\n            validationErrors.password = false;\n            setErrors((prevErrors) => {\n                return {\n                    ...prevErrors,\n                    password: \"\",\n                };\n            });\n        }\n\n        // Confirm password\n\n        if (formData.password.trim() !== formData.confirmPassword.trim()) {\n            validationErrors.confirmPassword = true;\n            setErrors((prevErrors) => {\n                return {\n                    ...prevErrors,\n                    confirmPassword: \"Passwords should be the same\",\n                };\n            });\n        } else {\n            validationErrors.password = false;\n            setErrors((prevErrors) => {\n                return {\n                    ...prevErrors,\n                    confirmPassword: \"\",\n                };\n            });\n        }\n\n        return (\n            !validationErrors.username &&\n            !validationErrors.email &&\n            !validationErrors.password &&\n            !validationErrors.confirmPassword\n        );\n    };\n\n    const handleInputChange = (e) => {\n        const target = e.target;\n        const name = target.name;\n\n        setFormData({\n            ...formData,\n            [name]: target.value,\n        });\n    };\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n\n        if (!validate()) {\n            return\n        }\n\n        axios\n            .post(\"https://akademia108.pl/api/social-app/user/signup\", {\n                username: formData.username,\n                email: formData.email,\n                password: formData.password\n            })\n            .then((res) => {\n                console.log(res.data);\n\n                let resData = res.data;\n\n                if (resData.signedup) {\n                    setSignUpMessage(\"Account created\")\n                    setSignUpDone(true)\n                } else {\n                    if (res.data.message.username) {\n                        setSignUpMessage(resData.message.username[0])\n                    } else if (resData.message.email) {\n                        setSignUpMessage(resData.message.email[0])\n                    }\n                };\n            })\n            .catch((error) => {\n                console.log(error);\n            });\n    }\n\n    return (\n        <div className=\"signUp\">\n\n            {props.user && <Navigate to=\"/\" />}\n            <form onSubmit={handleSubmit}>\n                {signUpMessage && <h2>{signUpMessage}</h2>}\n                <input\n                    type=\"text\"\n                    name=\"username\"\n                    placeholder=\"User name\"\n                    onChange={handleInputChange} />\n\n                {errors.username && <p>{errors.username}</p>}\n\n                <input\n                    type=\"email\"\n                    name=\"email\"\n                    placeholder=\"E-mail\"\n                    onChange={handleInputChange} />\n\n                {errors.email && <p>{errors.email}</p>}\n\n                <input\n                    type=\"password\"\n                    name=\"password\"\n                    placeholder=\"Password\"\n                    onChange={handleInputChange} />\n\n                {errors.password && <p>{errors.password}</p>}\n\n                <input\n                    type=\"password\"\n                    name=\"confirmPassword\"\n                    placeholder=\" Confirm password\"\n                    onChange={handleInputChange} />\n\n                {errors.confirmPassword && <p>{errors.confirmPassword}</p>}\n\n                <button className='btn' disabled={signUpDone}>Sign Up</button>\n\n                {signUpDone &&\n                    (<div>\n                        <Link to='/login' className='btn'>Go to login</Link>\n                    </div>\n                    )}\n\n            </form>\n        </div>\n    );\n\n};\n\nexport default SignUp;"],"mappings":"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"},"metadata":{},"sourceType":"module"}